var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
var CurrencyObject,preferredCurrency,observer,subscribable={subscribedObjects:[],subscribe:function(a){this.subscribedObjects.push(a)},notifyAllSubscribed:function(a){for(var b=0,c=this.subscribedObjects.length;b<c;b++)CurrencyObject[this.subscribedObjects[b].iAtTheTime].code==a&&embedInWebsite(this.subscribedObjects[b]);this.subscribedObjects=[]}};
function initCurrency(){browser.runtime.sendMessage({getCurrencies:!0}).then(function(a){CurrencyObject=a.response;browser.storage.local.get("preferredCurrency").then(function(b){elements=document.body.getElementsByTagName("*");preferredCurrency=b.preferredCurrency;start(filterElements(elements));initObserver()})})}
function initObserver(){observer=new MutationObserver(function(a,b){for(var c=0;c<a.length;c++)if(0!=a[c].addedNodes.length)for(var d=$jscomp.makeIterator(a[c].addedNodes),e=d.next();!e.done;e=d.next())e=e.value,void 0!==e.children&&(e=e.getElementsByTagName("*"),start(filterElements(e)))});observer.observe(document.body,{childList:!0,subtree:!0})}
function filterElements(a){for(var b=[],c=0;c<a.length;c++)""!=a[c].textContent&&0==a[c].children.length&&"SCRIPT"!=a[c].tagName&&"LINK"!=a[c].tagName&&"IFRAME"!=a[c].tagName&&"svg"!=a[c].tagName&&"symbol"!=a[c].tagName&&"path"!=a[c].tagName&&b.push(a[c]);return b}"complete"!==document.readyState?window.addEventListener("load",initCurrency,!1):initCurrency();
function start(a){for(var b,c=performance.now(),d=0;d<CurrencyObject.length;d++)if(CurrencyObject[d].code!==preferredCurrency)for(var e=0;e<a.length;e++){var g=a[e].textContent;if(!g.includes("\u205f"))for(var h=g.indexOf(CurrencyObject[d].symbol);-1!==h;)b=checkForNumbers(h,g),""!==b&&(b={iAtTheTime:d,jAtTheTime:e,indexofSymbol:h,CurrencyString:b,element:a[e]},0===CurrencyObject[d].value&&CurrencyObject[d].isBeingChecked?subscribable.subscribe(b):0!==CurrencyObject[d].value?(embedInWebsite(b),g=
a[e].textContent):(CurrencyObject[d].isBeingChecked=!0,checkCurrencyValue("https://free.currconv.com/api/v7/convert?q="+CurrencyObject[d].code+"_"+preferredCurrency+"&compact=ultra&apiKey=6294a7e98205235528ff",b,function(l,f){var k=l[CurrencyObject[f.iAtTheTime].code+"_"+preferredCurrency];CurrencyObject[f.iAtTheTime].value=k;browser.runtime.sendMessage({iOfObject:f.iAtTheTime,valueOfCurrency:k});CurrencyObject[f.iAtTheTime].isBeingChecked=!1;embedInWebsite(f);g=a[f.jAtTheTime].textContent;subscribable.notifyAllSubscribed(CurrencyObject[f.iAtTheTime].code)}))),
h=a[e].textContent.indexOf(CurrencyObject[d].symbol,h+CurrencyObject[d].symbol.length)}d=performance.now();console.log("start took"+(d-c)+"ms")}function embedInWebsite(a){var b="("+(parseFloat(a.CurrencyString)*CurrencyObject[a.iAtTheTime].value).toFixed(2)+"\u200e\u205f"+preferredCurrency+")";a.element.textContent=a.element.textContent.substr(0,a.indexofSymbol+a.CurrencyString.length+1)+b+a.element.textContent.substr(a.indexofSymbol+a.CurrencyString.length+1)}
function checkForNumbers(a,b){var c=checkAroundSymbol(1,a,b);""===c&&(c=checkAroundSymbol(-1,a,b));return c}function checkAroundSymbol(a,b,c){for(var d=b+a;d<c.length&&0<d&&(!isNaN(c[d])||"."===c[d]||","===c[d]);)d+=a;a=-1==a?c.slice(d,b):c.slice(b+1,d);a=a.replace(",",".");isNaN(a)&&(a="");return a}function checkCurrencyValue(a,b,c){fetch(a).then(function(d){return d.json()}).then(function(d){c(d,b)})["catch"](function(d){console.log(d)})};